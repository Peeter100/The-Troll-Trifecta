execute if entity @s[nbt={SelectedItem:{tag:{reporticon:1b}}},tag=am_canreport] run function ttt:amogus/item_use_report

execute if entity @s[nbt={SelectedItem:{tag:{venticon:1b}}},tag=am_canvent] run function ttt:amogus/item_use_vent
execute if entity @s[nbt={SelectedItem:{tag:{unventicon:1b}}}] run function ttt:amogus/item_use_unvent
execute if entity @s[nbt={SelectedItem:{tag:{ventlefticon:1b}}}] run execute as @e[type=marker,tag=sv] at @s run function ttt:amogus/item_use_vent_forward
execute if entity @s[nbt={SelectedItem:{tag:{ventrighticon:1b}}}] run execute as @e[type=marker,tag=sv] at @s run function ttt:amogus/item_use_vent_backward

execute if entity @s[nbt={SelectedItem:{tag:{killicon:1b}}},tag=!am_cankill] if entity @e[type=marker,tag=sv,scores={am_killcool=1..}] run execute as @e[tag=sv] at @s run function ttt:amogus/display_kill_cooldown
execute if entity @s[nbt={SelectedItem:{tag:{killicon:1b}}},tag=!am_cankill] if entity @e[type=marker,tag=sv,scores={am_killcool=0}] run tellraw @a {"text":"You are too far away!","color":"red"}
execute if entity @s[nbt={SelectedItem:{tag:{killicon:1b}}},tag=am_cankill] run function ttt:amogus/item_use_kill

execute if entity @s[nbt={SelectedItem:{tag:{useicon:1b}}},tag=am_cantask] at @s as @e[type=marker,tag=sv,limit=1] run function ttt:amogus/game_enter_task

execute if entity @s[nbt={SelectedItem:{tag:{lightsicon:1b}}}] run scoreboard players set @s Sabotage_ID 3
execute if entity @s[nbt={SelectedItem:{tag:{doorsicon:1b}}}] run function ttt:amogus/item_use_doors
execute if entity @s[nbt={SelectedItem:{tag:{o2icon:1b}}}] run scoreboard players set @s Sabotage_ID 2
execute if entity @s[nbt={SelectedItem:{tag:{reactoricon:1b}}}] run scoreboard players set @s Sabotage_ID 1
# execute if entity @s[nbt={SelectedItem:{tag:{sabotageicon:1b}}}] run tellraw @a [{"text":"Sabotage Menu:\n","color":"red","italic":false},{"text":"Cafeteria: ","color":"white"},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Cafeteria!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 4"}},{"text":"\nO2: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"green"}]}},{"text":"[O2 Systems]","color":"red","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the O2 systems!","color":"yellow","italic":false},{"text":"\nThis will force crewmates to activate\ntwo panels in Admin and O2 to prevent\nan instant gameover after ","color":"gray"},{"text":"30s","color":"green"},{"text":".\nAfter the sabotage is fixed, a ","color":"gray"},{"text":"30s","color":"green"},{"text":"\ncooldown is applied on all crisis sabotages.","color":"gray"},{"text":"\nThis sabotage cannot be used\nwhile others are active!","color":"red"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 2"}},{"text":"\nStorage: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Storage!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 5"}},{"text":"\nElectrical: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Lights]","color":"red","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage lights!","color":"yellow","italic":false},{"text":"\nWhile sabotaged, crewmate vision\nwill be drastically lowered allowing\nyou to perform kills more easily.\nThe lights can be fixed by turning on\nall of the switches in Electrical.\n","color":"gray"},{"text":"This sabotage cannot be used\nwhile others are active!","color":"red"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 3"}},{"text":" ","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Electrical!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 6"}},{"text":"\nMedBay: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in MedBay!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 7"}},{"text":"\nSecurity: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Security!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 10"}},{"text":"\nReactor: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Reactor]","color":"red","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the reactor!","color":"yellow","italic":false},{"text":"\nThis will force crewmates to hold down\ntwo hand scanners located in the\nReactor room at the same time to prevent\nan instant gameover after ","color":"gray"},{"text":"30s","color":"green"},{"text":".\nAfter the sabotage is fixed, a ","color":"gray"},{"text":"30s","color":"green"},{"text":"\ncooldown is applied on all crisis sabotages.","color":"gray"},{"text":"\nThis sabotage cannot be used\nwhile others are active!","color":"red"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 1"}},{"text":"\nUpper Engine: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Upper Engine!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 8"}},{"text":"\nLower Engine: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Lower Engine!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 9"}}]
execute if entity @s[nbt={SelectedItem:{tag:{sabotageicon:1b}}}] run tellraw @a [{"text":"Sabotage Menu:\n","color":"red","italic":false},{"text":"Cafeteria: ","color":"white"},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Cafeteria!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 4"}},{"text":"\nO2: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"green"}]}},{"text":"[O2 Systems]","color":"red","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the O2 systems!","color":"yellow","italic":false},{"text":"\nThis will force crewmates to activate\ntwo panels in Admin and O2 to prevent\nan instant gameover after ","color":"gray"},{"text":"30s","color":"green"},{"text":".\nAfter the sabotage is fixed, a ","color":"gray"},{"text":"30s","color":"green"},{"text":"\ncooldown is applied on all crisis sabotages.","color":"gray"},{"text":"\nThis sabotage cannot be used\nwhile others are active!","color":"red"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 2"}},{"text":" ","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"yellow","italic":false}]}},{"text":"[Change Hotbar Slot]","color":"green","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Swap Hotbar Shortcut\n","color":"green","italic":false},{"text":"Click to change your 8th hotbar\nslot to an ","color":"gray"},{"text":"O2 Sabotage Shortcut","color":"red"},{"text":".","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 16"}},{"text":"\nStorage: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Storage!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 5"}},{"text":"\nElectrical: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Lights]","color":"red","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage lights!","color":"yellow","italic":false},{"text":"\nWhile sabotaged, crewmate vision\nwill be drastically lowered allowing\nyou to perform kills more easily.\nThe lights can be fixed by turning on\nall of the switches in Electrical.\n","color":"gray"},{"text":"This sabotage cannot be used\nwhile others are active!","color":"red"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 3"}},{"text":" ","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Electrical!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 6"}},{"text":"\nMedBay: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in MedBay!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 7"}},{"text":"\nSecurity: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Security!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 10"}},{"text":"\nReactor: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Reactor]","color":"red","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the reactor!","color":"yellow","italic":false},{"text":"\nThis will force crewmates to hold down\ntwo hand scanners located in the\nReactor room at the same time to prevent\nan instant gameover after ","color":"gray"},{"text":"30s","color":"green"},{"text":".\nAfter the sabotage is fixed, a ","color":"gray"},{"text":"30s","color":"green"},{"text":"\ncooldown is applied on all crisis sabotages.","color":"gray"},{"text":"\nThis sabotage cannot be used\nwhile others are active!","color":"red"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 1"}},{"text":" ","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"yellow","italic":false}]}},{"text":"[Change Hotbar Slot]","color":"green","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Swap Hotbar Shortcut\n","color":"green","italic":false},{"text":"Click to change your 8th hotbar\nslot to a ","color":"gray"},{"text":"Reactor Sabotage Shortcut","color":"red"},{"text":".","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 15"}},{"text":"\nUpper Engine: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Upper Engine!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 8"}},{"text":"\nLower Engine: ","color":"white","hoverEvent":{"action":"show_text","contents":[{"text":"","color":"red"}]}},{"text":"[Close Doors]","color":"yellow","bold":true,"hoverEvent":{"action":"show_text","contents":[{"text":"Click to sabotage the doors in Lower Engine!","color":"yellow","italic":false},{"text":"\nDoors stay closed for ","color":"gray"},{"text":"10s","color":"green"},{"text":"\nand have a ","color":"gray"},{"text":"30s","color":"green"},{"text":" cooldown.","color":"gray"}]},"clickEvent":{"action":"run_command","value":"/trigger Sabotage_ID set 9"}}]
scoreboard players set @s rc 0
scoreboard players set @s villinteract 0