execute if entity @s[scores={securitytime=0}] if entity @e[tag=dashhoglin,x=21,y=16,z=213,dx=4,dy=1,dz=1] run scoreboard players set @s securitytime 1
execute if entity @s[scores={securitytime=14}] if entity @e[tag=dashhoglin,x=21,y=16,z=168,dx=4,dy=1,dz=1] run scoreboard players set @s securitytime 15
scoreboard players add @s[scores={securitytime=1..13}] securitytime 1
scoreboard players add @s[scores={securitytime=15..}] securitytime 1

execute if entity @s[scores={securitytime=0}] run execute as @e[tag=dashhoglin] at @s run tp @s ~ ~ ~0.5
execute if entity @s[scores={securitytime=14}] run execute as @e[tag=dashhoglin] at @s run tp @s ~ ~ ~-0.5

execute if entity @s[scores={securitytime=1..13}] run execute as @e[tag=dashhoglin] at @s run tp @s ~ ~ ~ ~15 0
execute if entity @s[scores={securitytime=15..27}] run execute as @e[tag=dashhoglin] at @s run tp @s ~ ~ ~ ~15 0

tag @a remove cangetrammed
tag @a[team=p,scores={x=21..25,y=16..18,z=168..214}] add cangetrammed
execute as @a[team=p,scores={x=20..26,y=16..18,z=167..215}] at @s if block ~ ~ ~ nether_brick_fence run tag @s add cangetrammed

execute if entity @s[scores={securitytime=0}] run execute as @e[tag=dashhoglin] at @s run execute as @p[team=p,distance=0..2,tag=cangetrammed] at @s run function ttt:act3/hoglin_kill
execute if entity @s[scores={securitytime=14}] run execute as @e[tag=dashhoglin] at @s run execute as @p[team=p,distance=0..2,tag=cangetrammed] at @s run function ttt:act3/hoglin_kill

execute if entity @s[scores={securitytime=0}] run execute as @e[type=item,nbt={OnGround:1b,Item:{tag:{hoglingold:1b}}}] at @s if entity @e[tag=dashhoglin,distance=0..2] run function ttt:act3/hoglin_split_gold
execute if entity @s[scores={securitytime=14}] run execute as @e[type=item,nbt={OnGround:1b,Item:{tag:{hoglingold:1b}}}] at @s if entity @e[tag=dashhoglin,distance=0..2] run function ttt:act3/hoglin_split_gold

execute if entity @s[scores={securitytime=28..}] run scoreboard players set @s securitytime 0


execute unless entity @e[tag=gametrader] run summon wandering_trader 33 16 216 {NoGravity:1b,Silent:1b,Invulnerable:1b,CustomNameVisible:0b,PersistenceRequired:1b,Rotation:[125F,0F],Tags:["forkill","namednpc","gametrader"],CustomName:'{"text":"Video Game Salesman","color":"dark_gray","italic":false}',Attributes:[{Name:generic.movement_speed,Base:0}],VillagerData:{level:99},Offers:{Recipes:[{rewardExp:0b,maxUses:1,buy:{id:"minecraft:gold_ingot",Count:6b,tag:{display:{Name:'{"text":"Gold Ingot","color":"yellow","italic":false}'}}},sell:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{display:{Name:'{"text":"Super Mushroom","color":"red","italic":false}',Lore:['[{"text":"Gain permanent ","color":"gray","italic":false},{"text":"Speed III","color":"#BDE2FF"}]','[{"text":"and ","color":"gray","italic":false},{"text":"Jump Boost V","color":"green"},{"text":". Gives ability"}]','[{"text":"to break ","color":"gray","italic":false},{"text":"toad bricks","color":"#A83E00"},{"text":" from underneath."}]','{"text":" "}','{"text":"Right-click to consume.","color":"yellow","italic":false}']},CustomModelData:7,mushroom:1b,fakeshopitem:1b}}},{rewardExp:0b,maxUses:1,buy:{id:"minecraft:gold_ingot",Count:8b,tag:{display:{Name:'{"text":"Gold Ingot","color":"yellow","italic":false}'}}},sell:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{display:{Name:'{"text":"Sonic\'s Secret Ring","color":"yellow","italic":false}',Lore:['{"text":"Spam right-click to dash","color":"gray","italic":false}','[{"text":"forward using a ","color":"gray","italic":false},{"text":"spindash","color":"aqua"},{"text":"."}]','{"text":"Action can only be performed","color":"gray","italic":false}','{"text":"while standing on the ground.","color":"gray","italic":false}']},CustomModelData:9,ring:1b,fakeshopitem:1b}}},{rewardExp:0b,maxUses:1,buy:{id:"minecraft:gold_ingot",Count:15b,tag:{display:{Name:'{"text":"Gold Ingot","color":"yellow","italic":false}'}}},sell:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{display:{Name:'{"text":"The Aperture Science Handheld Dual Portal Device","color":"white","italic":false}',Lore:['[{"text":"Left-click to place a ","color":"gray","italic":false},{"text":"blue portal","color":"blue"},{"text":"."}]','[{"text":"Right-click to place an ","color":"gray","italic":false},{"text":"orange portal","color":"gold"},{"text":"."}]','{"text":"All players can freely move between the","color":"gray","italic":false}','[{"text":"the ","color":"gray","italic":false},{"text":"blue","color":"blue"},{"text":" and "},{"text":"orange","color":"gold"},{"text":" portal."}]','[{"text":"Portals can only be placed on ","color":"gray","italic":false},{"text":"portalable surfaces","color":"yellow"},{"text":"."}]']},CustomModelData:16,pgun:1b,fakeshopitem:1b}}},{rewardExp:0b,maxUses:1,buy:{id:"minecraft:gold_ingot",Count:7b,tag:{display:{Name:'{"text":"Gold Ingot","color":"yellow","italic":false}'}}},sell:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{display:{Name:'{"text":"The Zero Point Energy Field Manipulator","color":"gold","italic":false}',Lore:['[{"text":"Can be used to manipulate ","color":"gray","italic":false},{"text":"physics objects","color":"yellow"},{"text":"."}]','{"text":"Right-click a physics object to pick it up","color":"gray","italic":false}','{"text":"and right-click again to place it down","color":"gray","italic":false}','{"text":"or alternatively use left-click to launch it.","color":"gray","italic":false}']},CustomModelData:17,ggun:1b,fakeshopitem:1b}}},{rewardExp:0b,maxUses:1,buy:{id:"minecraft:gold_ingot",Count:4b,tag:{display:{Name:'{"text":"Gold Ingot","color":"yellow","italic":false}'}}},sell:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{display:{Name:'{"text":"Angry Bird","color":"red","italic":false}',Lore:['{"text":"Angry Bird from the hit-game","color":"gray","italic":false}','{"text":"Angry Birds produced by Rovio","color":"gray","italic":false}','{"text":"(the company behind Angry Birds).","color":"gray","italic":false}','{"text":" "}','{"text":"Right-click to launch.","color":"yellow","italic":false}']},CustomModelData:18,bird:1b,fakeshopitem:1b}}}]}}
execute if entity @s[scores={am_gametimer=0}] if data entity @e[tag=gametrader,limit=1] Offers.Recipes[{uses:1}] run function ttt:act3/lock_trader