# act = 1
# actpart = 3

# act = 2
# actpart = ...

execute unless blocks -10 29 43 -8 33 49 18 29 2 all run clone 18 29 2 20 33 8 -10 29 43
summon villager -7 30.0 63 {NoGravity:1b,Silent:0b,Invulnerable:1b,CustomNameVisible:0b,PersistenceRequired:1b,Health:100f,Rotation:[-155F,0F],Tags:["forkill","globalhide","namednpc","villshop"],CustomName:'{"text":"Guardsman","color":"yellow","italic":false}',Attributes:[{Name:generic.max_health,Base:100},{Name:generic.movement_speed,Base:0}],VillagerData:{level:5,profession:"minecraft:nitwit",type:"minecraft:savanna"},Offers:{Recipes:[{rewardExp:0b,maxUses:1,buy:{id:"minecraft:bow",Count:1b,tag:{display:{Name:'{"text":"Flame Hurricane Bow","color":"gold","italic":false}',Lore:['[{"text":"Base Attack Damage: ","color":"gray","italic":false},{"text":"+7.5","color":"red"}]','{"text":" "}','{"text":"Power V","color":"blue","italic":false}','[{"text":"Increases damage by ","color":"gray","italic":false},{"text":"+25%","color":"red","italic":false},{"text":" and"}]','[{"text":"+25%","color":"red","italic":false},{"text":" damage per enchantment level.","color":"gray"}]','{"text":" "}','{"text":"Flame X","color":"blue","italic":false}','[{"text":"Deals ","color":"gray","italic":false},{"text":"1","color":"gold"},{"text":" fire damage per second"}]','[{"text":"for ","color":"gray","italic":false},{"text":"5s","color":"yellow"},{"text":" for every enchantment level."}]','[{"text":"Can also be used to ","color":"gray","italic":false},{"text":"ignite blocks","color":"gold"}]','{"text":"from a distance.","color":"gray","italic":false}','{"text":" "}','{"text":"Infinity","color":"blue","italic":false}','{"text":"The bow can shoot infinitely as long","color":"gray","italic":false}','{"text":"as there is 1 arrow in your inventory.","color":"gray","italic":false}']},HideFlags:5,Unbreakable:1b,CustomModelData:1,flamebow:1b,Enchantments:[{id:"minecraft:flame",lvl:1},{id:"minecraft:infinity",lvl:1}]}},sell:{id:"minecraft:tnt",Count:1b,tag:{display:{Name:'{"text":"Rapid TNT","color":"red","italic":false}',Lore:['{"text":"Explodes when in inventory or on","color":"gray","italic":false}','[{"text":"the ground for ","color":"gray","italic":false},{"text":"7 seconds","color":"yellow"},{"text":" straight."}]','{"text":"The timer resets when thrown or picked up.","color":"gray","italic":false}','{"text":" "}','[{"text":"Emits ","color":"gray","italic":false},{"text":"beeping noises","color":"red"},{"text":" when"}]','{"text":"close to exploding.","color":"gray","italic":false}','{"text":" "}','{"text":"Can be used to break through","color":"gray","italic":false}','{"text":"already cracked or damaged surfaces.","color":"gray","italic":false}']},tntitem:1b}}}]}}
execute if entity @s[scores={playercount=2}] run data merge block -31 13 3 {Items:[{Slot:12b,id:"minecraft:stick",Count:1b,tag:{display:{Name:'{"text":"Hold-Trigger Hover Wand","color":"light_purple","italic":false}',Lore:['{"text":"While holding this wand, you will not be affected","color":"gray","italic":false}','[{"text":"by ","color":"gray","italic":false},{"text":"gravity","color":"yellow"},{"text":" as long as you have enough "},{"text":"energy","color":"light_purple"},{"text":"."}]','{"text":"Energy can be restored by standing","color":"gray","italic":false}','[{"text":"on the ground while ","color":"gray","italic":false},{"text":"NOT","color":"red"},{"text":" holding the wand."}]','{"text":" "}','{"text":"TIP: Switch to the wand immediately after","color":"red","italic":false}','{"text":"jumping to jump slightly higher!","color":"red","italic":false}']},HideFlags:3,CustomModelData:1,hoverwand:1b,Enchantments:[{}]}},{Slot:14b,id:"minecraft:stick",Count:1b,tag:{display:{Name:'{"text":"Hold-Trigger Hover Wand","color":"light_purple","italic":false}',Lore:['{"text":"While holding this wand, you will not be affected","color":"gray","italic":false}','[{"text":"by ","color":"gray","italic":false},{"text":"gravity","color":"yellow"},{"text":" as long as you have enough "},{"text":"energy","color":"light_purple"},{"text":"."}]','{"text":"Energy can be restored by standing","color":"gray","italic":false}','[{"text":"on the ground while ","color":"gray","italic":false},{"text":"NOT","color":"red"},{"text":" holding the wand."}]','{"text":" "}','{"text":"TIP: Switch to the wand immediately after","color":"red","italic":false}','{"text":"jumping to jump slightly higher!","color":"red","italic":false}']},HideFlags:3,CustomModelData:1,hoverwand:1b,Enchantments:[{}]}}],CustomName:'{"text":"Sacred Treasure","italic":false}'}
execute if entity @s[scores={playercount=3..}] run data merge block -31 13 3 {Items:[{Slot:11b,id:"minecraft:stick",Count:1b,tag:{display:{Name:'{"text":"Hold-Trigger Hover Wand","color":"light_purple","italic":false}',Lore:['{"text":"While holding this wand, you will not be affected","color":"gray","italic":false}','[{"text":"by ","color":"gray","italic":false},{"text":"gravity","color":"yellow"},{"text":" as long as you have enough "},{"text":"energy","color":"light_purple"},{"text":"."}]','{"text":"Energy can be restored by standing","color":"gray","italic":false}','[{"text":"on the ground while ","color":"gray","italic":false},{"text":"NOT","color":"red"},{"text":" holding the wand."}]','{"text":" "}','{"text":"TIP: Switch to the wand immediately after","color":"red","italic":false}','{"text":"jumping to jump slightly higher!","color":"red","italic":false}']},HideFlags:3,CustomModelData:1,hoverwand:1b,Enchantments:[{}]}},{Slot:13b,id:"minecraft:stick",Count:1b,tag:{display:{Name:'{"text":"Hold-Trigger Hover Wand","color":"light_purple","italic":false}',Lore:['{"text":"While holding this wand, you will not be affected","color":"gray","italic":false}','[{"text":"by ","color":"gray","italic":false},{"text":"gravity","color":"yellow"},{"text":" as long as you have enough "},{"text":"energy","color":"light_purple"},{"text":"."}]','{"text":"Energy can be restored by standing","color":"gray","italic":false}','[{"text":"on the ground while ","color":"gray","italic":false},{"text":"NOT","color":"red"},{"text":" holding the wand."}]','{"text":" "}','{"text":"TIP: Switch to the wand immediately after","color":"red","italic":false}','{"text":"jumping to jump slightly higher!","color":"red","italic":false}']},HideFlags:3,CustomModelData:1,hoverwand:1b,Enchantments:[{}]}},{Slot:15b,id:"minecraft:stick",Count:1b,tag:{display:{Name:'{"text":"Hold-Trigger Hover Wand","color":"light_purple","italic":false}',Lore:['{"text":"While holding this wand, you will not be affected","color":"gray","italic":false}','[{"text":"by ","color":"gray","italic":false},{"text":"gravity","color":"yellow"},{"text":" as long as you have enough "},{"text":"energy","color":"light_purple"},{"text":"."}]','{"text":"Energy can be restored by standing","color":"gray","italic":false}','[{"text":"on the ground while ","color":"gray","italic":false},{"text":"NOT","color":"red"},{"text":" holding the wand."}]','{"text":" "}','{"text":"TIP: Switch to the wand immediately after","color":"red","italic":false}','{"text":"jumping to jump slightly higher!","color":"red","italic":false}']},HideFlags:3,CustomModelData:1,hoverwand:1b,Enchantments:[{}]}}],CustomName:'{"text":"Sacred Treasure","italic":false}'}
clone -71 31 104 -71 32 105 -50 31 97
setblock -7 31 160 lever[powered=false,face=wall,facing=north]
setblock 1 31 160 lever[powered=false,face=wall,facing=north]

# finale
fill -87 14 16 -81 23 26 air